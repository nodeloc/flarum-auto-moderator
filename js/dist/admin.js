module.exports=function(t){var n={};function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)e.d(r,a,function(n){return t[n]}.bind(null,a));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=32)}([function(t,n,e){"use strict";function r(t,n){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function a(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n)}e.d(n,"a",(function(){return a}))},function(t,n){t.exports=flarum.core.compat.Model},function(t,n){t.exports=flarum.core.compat["common/utils/Stream"]},function(t,n){t.exports=flarum.core.compat.Component},function(t,n){t.exports=flarum.core.compat["common/components/Button"]},function(t,n){t.exports=flarum.core.compat["common/components/LoadingIndicator"]},function(t,n,e){"use strict";function r(t){var n=t.filter((function(t){return t.actions()})).reduce((function(t,n){var e=n.actions().filter((function(t){return"add_to_group"===t.type||"remove_from_group"===t.type})).map((function(t){return t.settings.group_id}));return t.push.apply(t,e),t}),[]);return Array.from(new Set(n).values()).map((function(t){return app.store.getById("groups",t)})).filter((function(t){return t}))}e.d(n,"a",(function(){return r}))},function(t,n){t.exports=flarum.core.compat["common/helpers/icon"]},function(t,n){t.exports=flarum.core.compat["common/components/Tooltip"]},function(t,n){t.exports=flarum.core.compat["common/utils/classList"]},function(t,n,e){"use strict";e.d(n,"a",(function(){return u}));var r=e(0),a=e(11),i=e.n(a),o=e(16),s=e.n(o),c=e(6),u=function(t){function n(){return t.apply(this,arguments)||this}return Object(r.a)(n,t),n.prototype.view=function(){var t=Object(c.a)(this.attrs.criteria),n=this.attrs.user;return m("div",{className:"ManagedGroups Form-group"},m("hr",null),m("h4",null,app.translator.trans("nodeloc-auto-moderator.lib.managed_groups.header")),m("ul",null,t.map((function(t){return m("label",{className:"checkbox"},n&&m("input",{type:"checkbox",checked:n.groups().includes(t),disabled:!0}),app.translator.trans("nodeloc-auto-moderator.lib.managed_groups.group_item",{badge:s.a.component({group:t,label:""}),groupName:t.nameSingular()}))}))),m("p",null,app.translator.trans("nodeloc-auto-moderator.lib.managed_groups.groups_not_editable")))},n}(i.a)},function(t,n){t.exports=flarum.core.compat["common/Component"]},function(t,n){t.exports=flarum.core.compat["common/extend"]},function(t,n){t.exports=flarum.core.compat["common/components/EditUserModal"]},function(t,n){t.exports=flarum.core.compat["common/components/Alert"]},function(t,n){t.exports=flarum.core.compat["common/utils/ItemList"]},function(t,n){t.exports=flarum.core.compat["common/components/GroupBadge"]},function(t,n){t.exports=flarum.core.compat["models/User"]},function(t,n,e){"use strict";e.d(n,"a",(function(){return m}));var r=e(1),a=e.n(r),i=e(17),o=e.n(i),s=e(0),c=function(t){function n(){return t.apply(this,arguments)||this}return Object(s.a)(n,t),n}(a.a);function m(){app.store.models.criteria=c,o.a.prototype.criteria=a.a.hasMany("criteria")}Object.assign(c.prototype,{name:a.a.attribute("name"),icon:a.a.attribute("icon"),description:a.a.attribute("description"),actions:a.a.attribute("actions"),metrics:a.a.attribute("metrics"),requirements:a.a.attribute("requirements"),isValid:a.a.attribute("isValid"),invalidActionSettings:a.a.attribute("invalidActionSettings"),invalidRequirementSettings:a.a.attribute("invalidRequirementSettings")})},function(t,n){t.exports=flarum.core.compat["common/components/Select"]},function(t,n,e){"use strict";e.d(n,"a",(function(){return d}));var r=e(12),a=e(13),i=e.n(a),o=e(5),s=e.n(o),c=e(15),u=e.n(c),l=e(6),p=e(10);function d(){Object(r.extend)(i.a.prototype,"oninit",(function(){var t=this;this.loading=!0,app.store.find("criteria").then((function(n){Object(l.a)(n).forEach((function(n){return delete t.groups[n.id()]})),t.loading=!1,m.redraw()}))})),Object(r.override)(i.a.prototype,"fields",(function(t){if(this.loading){var n=new u.a;return n.add("loading",m(s.a,null)),n}var e=t();return e.add("Criteria",m(p.a,{criteria:app.store.all("criteria"),user:this.attrs.user}),10),e}))}},function(t,n){t.exports=flarum.core.compat["components/Button"]},function(t,n){t.exports=flarum.core.compat["common/components/Switch"]},function(t,n){t.exports=flarum.core.compat["utils/Stream"]},function(t,n){t.exports=flarum.core.compat["models/Group"]},function(t,n){t.exports=flarum.core.compat["admin/components/ExtensionPage"]},function(t,n){t.exports=flarum.core.compat["common/components/Link"]},function(t,n){t.exports=flarum.core.compat["common/utils/stringToColor"]},function(t,n){t.exports=flarum.core.compat["admin/components/AdminPage"]},function(t,n){t.exports=flarum.core.compat["common/components/LinkButton"]},function(t,n){t.exports=flarum.core.compat["components/Dropdown"]},function(t,n){t.exports=flarum.core.compat["helpers/icon"]},function(t,n,e){"use strict";e.r(n);var r=e(20),a=e(18),i=e(0),o=e(25),s=e.n(o),c=e(26),u=e.n(c),l=e(5),p=e.n(l),d=e(8),f=e.n(d),h=e(7),g=e.n(h),v=e(9),b=e.n(v),y=e(27),_=e.n(y),x=e(10),N=e(3),O=e.n(N),w=function(t){function n(){return t.apply(this,arguments)||this}return Object(i.a)(n,t),n.prototype.view=function(){return m("div",{className:"AutoModeratorInstructions"},m("h4",null,app.translator.trans("nodeloc-auto-moderator.admin.automoderator_instructions.header")),m("ul",null,app.translator.trans("nodeloc-auto-moderator.admin.automoderator_instructions.text")))},n}(O.a);function D(t){var n=t?t.name():app.translator.trans("nodeloc-auto-moderator.admin.automoderator_page.create_criterion_button"),e=t?t.icon()||"fas fa-bolt":"fas fa-plus",r=t?{"background-color":"#"+_()(t.name())}:"";return m(u.a,{className:"ExtensionListItem",href:app.route.criterion(t)},m("span",{className:"ExtensionListItem-icon ExtensionIcon",style:r},g()(e)),m("span",{className:b()({"ExtensionListItem-title":!0,"ExtensionListItem--invalid":t&&!t.isValid()})},t&&!t.isValid()&&m(f.a,{text:app.translator.trans("nodeloc-auto-moderator.admin.automoderator_page.criterion_invalid")},g()("fas fa-exclamation-triangle")),n))}var L=function(t){function n(){return t.apply(this,arguments)||this}Object(i.a)(n,t);var e=n.prototype;return e.oninit=function(n){var e=this;t.prototype.oninit.call(this,n),this.loading=!0,app.store.find("criteria").then((function(){e.loading=!1,m.redraw()}))},e.content=function(){return this.loading?m("div",{className:"Criteria"},m("div",{className:"container"},m(p.a,null))):m("div",{className:"Criteria"},m("div",{className:"container"},m("div",{className:"ExtensionsWidget-list Criteria-list"},m("p",{className:"Criteria-list-heading"},app.translator.trans("nodeloc-auto-moderator.admin.automoderator_page.list_heading")),m("div",{className:"ExtensionList"},[].concat(app.store.all("criteria").map(D),[D()]))),m(x.a,{criteria:app.store.all("criteria")}),m("hr",null),m(w,null)))},n}(s.a);function j(){return(j=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(null,arguments)}var E=e(28),q=e.n(E),S=e(4),k=e.n(S),B=e(29),G=e.n(B),F=e(19),C=e.n(F),I=e(2),M=e.n(I),T=function(t){function n(){return t.apply(this,arguments)||this}return Object(i.a)(n,t),n.prototype.view=function(){var t=this.attrs.item,n=this.attrs.selected;return m("li",null,m("div",{className:"DriverListItem-info"},m("span",{className:"DriverListItem-name DriverListItem-undefined"},app.translator.trans("nodeloc-auto-moderator.admin.undefined_driver_item.text",{driverName:t.type})),k.a.component({className:"Button Button--link",icon:"fas fa-trash-alt",onclick:function(){return n(n().filter((function(n){return n!==t})))}})),m("hr",null))},n}(O.a),A=function(t){function n(){return t.apply(this,arguments)||this}return Object(i.a)(n,t),n.prototype.view=function(){var t,n=this.attrs.driverType,e=this.attrs.type,r=this.attrs.settings,a=this.attrs.availableSettings,i=app.autoModeratorForms[n];return t=e in i?i[e].component({settings:r,availableSettings:a}):Object.keys(a).map((function(t){return m("div",{className:"Form-group"},m("input",{className:"FormControl",value:r()[t],onchange:function(n){var e=j({},r());e[t]=n.target.value,r(e)},placeholder:app.translator.trans(a[t])}))})),m("div",{className:"DriverListItem-form"},t)},n}(O.a),P=function(t){function n(){return t.apply(this,arguments)||this}return Object(i.a)(n,t),n.prototype.view=function(){var t=this.attrs.action,n=this.attrs.actionDef,e=this.attrs.selected;return n?m("li",null,m("div",{className:b()({"DriverListItem-info":!0,"DriverListItem--missingExt":n.missingExt})},n.missingExt&&m(f.a,{text:app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.driver_missing_ext")},g()("fas fa-exclamation-triangle")),m("span",{className:"DriverListItem-name"},app.translator.trans(n.translationKey)),k.a.component({className:"Button Button--link",icon:"fas fa-trash-alt",onclick:function(){return e(e().filter((function(n){return n!==t})))}}),m(A,{driverType:"action",type:t.type,settings:t.settings,availableSettings:n.availableSettings})),m("hr",null)):m(T,{item:t,selected:e})},n}(O.a),R=e(21),K=e.n(R),W=e(23),V=e.n(W),U=function(t){function n(){return t.apply(this,arguments)||this}Object(i.a)(n,t);var e=n.prototype;return e.oninit=function(n){t.prototype.oninit.call(this,n),this.state=-1,-1!==this.attrs.min()&&(this.state+=1),-1!==this.attrs.max()&&(this.state+=2),this.min=V()(this.attrs.min()),this.max=V()(this.attrs.max())},e.view=function(){return m("div",{className:"Form-group MinMaxSelector"},m("label",null,this.attrs.label),m("div",{className:"MinMaxSelector--inputs"},this.controls()))},e.controls=function(){var t=this,e=function(){return m("input",{className:"FormControl",type:"number",min:"0",max:t.state===n.State.BETWEEN?-1!==t.attrs.max()?t.attrs.max():t.max():1/0,placeholder:"min",bidi:t.attrs.min})},r=function(){return m("input",{className:"FormControl",type:"number",min:t.state===Math.max(0,n.State.BETWEEN?-1!==t.attrs.min()?t.attrs.min():t.min():0),placeholder:"max",bidi:t.attrs.max})},a=function(){return m("input",{className:"FormControl MinMaxSelector--placeholder",disabled:!0,placeholder:"X"})},i=function(n){return m(K.a,{className:"Button",onclick:t.cycle.bind(t),icon:n})};switch(this.state){case n.State.LTE:return[a(),i("fas fa-less-than-equal"),r()];case n.State.GTE:return[a(),i("fas fa-greater-than-equal"),e()];case n.State.BETWEEN:return[e(),i("fas fa-less-than-equal"),a(),i("fas fa-less-than-equal"),r()]}},e.cycle=function(){switch(this.state++,this.state%=3,-1!==this.attrs.min()&&this.min(this.attrs.min()),-1!==this.attrs.max()&&this.max(this.attrs.max()),this.state){case n.State.GTE:this.attrs.min(this.min()),this.attrs.max(-1);break;case n.State.LTE:this.attrs.min(-1),this.attrs.max(this.max());break;case n.State.BETWEEN:this.attrs.min(this.min()),this.attrs.max(this.max())}},n}(O.a);U.State={GTE:0,LTE:1,BETWEEN:2};var z,X,H,J=U,Q=function(t){function n(){return t.apply(this,arguments)||this}return Object(i.a)(n,t),n.prototype.view=function(){var t=this.attrs.metric,n=this.attrs.metricDef,e=this.attrs.selected;return n?m("li",null,m("div",{className:b()({"DriverListItem-info":!0,"DriverListItem--missingExt":n.missingExt})},n.missingExt&&m(f.a,{text:app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.driver_missing_ext")},g()("fas fa-exclamation-triangle")),m("span",{className:"DriverListItem-name"},app.translator.trans(n.translationKey)),k.a.component({className:"Button Button--link",icon:"fas fa-trash-alt",onclick:function(){return e(e().filter((function(n){return n!==t})))}})),m(J,{min:t.min,max:t.max}),m("hr",null)):m(T,{item:t,selected:e})},n}(O.a),Y=e(22),Z=e.n(Y),$=function(t){function n(){return t.apply(this,arguments)||this}return Object(i.a)(n,t),n.prototype.view=function(){var t=this.attrs.requirement,n=this.attrs.requirementDef,e=this.attrs.selected;return n?m("li",null,m("div",{className:b()({"DriverListItem-info":!0,"DriverListItem--missingExt":n.missingExt})},n.missingExt&&m(f.a,{text:app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.driver_missing_ext")},g()("fas fa-exclamation-triangle")),m("span",{className:"DriverListItem-name"},app.translator.trans(n.translationKey)),k.a.component({className:"Button Button--link",icon:"fas fa-trash-alt",onclick:function(){return e(e().filter((function(n){return n!==t})))}})),m(Z.a,{state:t.negated(),onchange:t.negated},app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.negated")),m(A,{driverType:"requirement",type:t.type,settings:t.settings,availableSettings:n.availableSettings}),m("hr",null)):m(T,{item:t,selected:e})},n}(O.a),tt=e(14),nt=e.n(tt),et=function(t){function n(){return t.apply(this,arguments)||this}return Object(i.a)(n,t),n.prototype.view=function(){var t=this.attrs.criterion;if(t){var n=[];t.isValid()?n.push(m(nt.a,{type:"success",dismissible:!1},app.translator.trans("nodeloc-auto-moderator.admin.criterion_status.valid"))):n.push(m(nt.a,{type:"error",dismissible:!1},app.translator.trans("nodeloc-auto-moderator.admin.criterion_status.invalid")));var e=t.invalidActionSettings();e&&Object.keys(e).length&&n.push(m(nt.a,{type:"error",dismissible:!1},app.translator.trans("nodeloc-auto-moderator.admin.criterion_status.action_validation_errors"),m("div",null,m("ol",null,Object.keys(e).map((function(t){return m("li",null,m("strong",null,t,":")," ",e[t].join(""))}))))));var r=t.invalidRequirementSettings();return r&&Object.keys(r).length&&n.push(m(nt.a,{type:"error",dismissible:!1},app.translator.trans("nodeloc-auto-moderator.admin.criterion_status.requirement_validation_errors"),m("div",null,m("ol",null,Object.keys(r).map((function(t){return m("li",null,m("strong",null,t,":")," ",r[t].join(""))})))))),0===t.metrics().length&&0===t.requirements().length&&n.push(m(nt.a,{type:"danger",dismissible:!1},app.translator.trans("nodeloc-auto-moderator.admin.criterion_status.no_metrics_or_reqs"))),0===t.actions().length&&n.push(m(nt.a,{type:"danger",dismissible:!1},app.translator.trans("nodeloc-auto-moderator.admin.criterion_status.no_actions"))),m("div",{className:"StatusCheck Form-group"},m("label",null,app.translator.trans("nodeloc-auto-moderator.admin.criterion_status.heading")),n)}},n}(O.a),rt=function(t){function n(){return t.apply(this,arguments)||this}Object(i.a)(n,t);var e=n.prototype;return e.oninit=function(n){var e=this;t.prototype.oninit.call(this,n),this.id=m.route.param("id"),this.name=M()(""),this.icon=M()("fas fa-bolt"),this.description=M()(""),this.actionsOnGain=M()([]),this.actionsOnLoss=M()([]),this.metrics=M()([]),this.requirements=M()([]),this.newActionOnGain=M()(""),this.newActionOnLoss=M()(""),this.newMetric=M()(""),this.newRequirement=M()(""),this.loadingDrivers=!0,app.request({method:"GET",url:app.forum.attribute("apiUrl")+"/automod_drivers"}).then((function(t){z=t.data.attributes.action,X=t.data.attributes.metric,H=t.data.attributes.requirement,e.loadingDrivers=!1,m.redraw()})),"new"!==this.id&&(this.loadingCriterion=!0,app.store.find("criteria",this.id).then((function(t){e.loadCriterion(t),e.loadingCriterion=!1,m.redraw()})))},e.loadCriterion=function(t){this.criterion=t,this.name(t.name()),this.icon(t.icon()||"fas fa-bolt"),this.description(t.description()),this.metrics(t.metrics().map((function(t){return{type:t.type,min:M()(t.min),max:M()(t.max)}}))),this.actionsOnGain(t.actions().filter((function(t){return t.gain})).map((function(t){return{type:t.type,settings:M()(t.settings)}}))),this.actionsOnLoss(t.actions().filter((function(t){return!t.gain})).map((function(t){return{type:t.type,settings:M()(t.settings)}}))),this.requirements(t.requirements().map((function(t){return{type:t.type,negated:M()(t.negated),settings:M()(t.settings)}})))},e.headerInfo=function(){var t,n="";return this.loadingCriterion?(n=app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.loading"),t=app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.loading")):t=this.criterion?this.criterion.name():app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.new_criterion"),{className:"CriterionPage",icon:this.icon(),title:t,description:n}},e.content=function(){return this.loadingCriterion||this.loadingDrivers?m("div",{className:"Criteria"},m("div",{className:"container"},m(p.a,null))):m("div",{className:"Criteria"},m("div",{className:"container"},m("form",{onsubmit:this.onsubmit.bind(this)},m("div",{className:"Form-group"},m(G.a,{className:"Button",icon:"fas fa-chevron-left",href:app.route("extension",{id:"nodeloc-auto-moderator"})},app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.back"))),m(et,{criterion:this.criterion}),m("div",{className:"Form-group"},m("label",null,app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.name_label")),m("input",{className:"FormControl",bidi:this.name,required:!0})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.icon_label")),m("input",{className:"FormControl",bidi:this.icon,required:!0})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.description_label")),m("input",{className:"FormControl",bidi:this.description})),this.metricsAndRequirementsForm(),this.actionsForm(),m("div",{className:"Form-group"},m(k.a,{type:"submit",className:"Button Button--primary",loading:this.saving,disabled:this.saving},app.translator.trans("core.admin.settings.submit_button"))),this.criterion&&m(k.a,{type:"button",onclick:this.delete.bind(this),className:"Button Button--danger",loading:this.deleting,disabled:this.saving},app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.delete_button"))),m("hr",null),m(w,null)))},e.metricsAndRequirementsForm=function(){var t=this;return m("div",{className:"Form-group"},m("label",null,app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.metrics_and_requirements_label")),m("div",{className:"helpText"},app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.metrics_and_requirements_help")),m("div",{className:"SettingsGroups"},m("div",{className:"DriverGroup"},m("label",null,app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.metrics_heading")),m("ul",{className:"DriverList DriverList--primary"},this.metrics().map((function(n){return m(Q,{metric:n,metricDef:X[n.type],selected:t.metrics})}))),m("span",{class:"DriverGroup-controls"},C.a.component({options:Object.keys(X).reduce((function(t,n){return t[n]=app.translator.trans(X[n].translationKey),t}),{}),value:this.newMetric(),onchange:this.newMetric}),k.a.component({className:"Button DriverList-button",icon:"fas fa-plus",disabled:!this.newMetric(),onclick:function(){t.metrics([].concat(t.metrics(),[{type:t.newMetric(),min:M()(),max:M()()}]))}}))),m("div",{className:"DriverGroup DriverGroup--secondary"},m("label",null,app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.requirements_heading")),m("ul",{className:"DriverList DriverList--primary"},this.requirements().map((function(n){return m($,{requirement:n,requirementDef:H[n.type],selected:t.requirements})}))),m("span",{class:"DriverGroup-controls"},C.a.component({options:Object.keys(H).reduce((function(t,n){return t[n]=app.translator.trans(H[n].translationKey),t}),{}),value:this.newRequirement(),onchange:this.newRequirement}),k.a.component({className:"Button DriverList-button",icon:"fas fa-plus",disabled:!this.newRequirement(),onclick:function(){t.requirements([].concat(t.requirements(),[{type:t.newRequirement(),negated:M()(!1),settings:M()({})}]))}})))))},e.actionsForm=function(){var t=this;return m("div",{className:"Form-group"},m("label",null,app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.actions_label")),m("div",{className:"helpText"},app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.actions_help")),m("div",{className:"SettingsGroups"},m("div",{className:"DriverGroup"},m("label",null,app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.actions_on_gain_heading")),m("ul",{className:"DriverList DriverList--primary"},this.actionsOnGain().map((function(n){return m(P,{action:n,actionDef:z[n.type],selected:t.actionsOnGain})}))),m("span",{class:"DriverGroup-controls"},C.a.component({options:Object.keys(z).reduce((function(t,n){return t[n]=app.translator.trans(z[n].translationKey),t}),{}),value:this.newActionOnGain(),onchange:this.newActionOnGain}),k.a.component({className:"Button DriverList-button",icon:"fas fa-plus",disabled:!this.newActionOnGain(),onclick:function(){t.actionsOnGain([].concat(t.actionsOnGain(),[{type:t.newActionOnGain(),settings:M()({})}]))}}))),m("div",{className:"DriverGroup DriverGroup--secondary"},m("label",null,app.translator.trans("nodeloc-auto-moderator.admin.criterion_page.actions_on_loss_heading")),m("ul",{className:"DriverList"},this.actionsOnLoss().map((function(n){return m(P,{action:n,actionDef:z[n.type],selected:t.actionsOnLoss})}))),m("span",{class:"DriverGroup-controls"},C.a.component({options:Object.keys(z).reduce((function(t,n){return t[n]=app.translator.trans(z[n].translationKey),t}),{}),value:this.newActionOnLoss(),onchange:this.newActionOnLoss}),k.a.component({className:"Button DriverList-button",icon:"fas fa-plus",disabled:!this.newActionOnLoss(),onclick:function(){t.actionsOnLoss([].concat(t.actionsOnLoss(),[{type:t.newActionOnLoss(),settings:M()({})}]))}})))))},e.data=function(){return{name:this.name(),icon:this.icon(),description:this.description(),actions:[].concat(this.actionsOnGain().map((function(t){return j({},t,{gain:!0,settings:t.settings()})})),this.actionsOnLoss().map((function(t){return j({},t,{gain:!1,settings:t.settings()})}))),metrics:this.metrics().map((function(t){return{type:t.type,min:t.min(),max:t.max()}})),requirements:this.requirements().map((function(t){return{type:t.type,negated:t.negated(),settings:t.settings()}}))}},e.delete=function(t){t.preventDefault(),this.deleting=!0,m.redraw(),this.criterion.delete().then((function(){m.route.set(app.route("extension",{id:"nodeloc-auto-moderator"}))}))},e.onsubmit=function(t){var n=this;t.preventDefault(),this.saving=!0,m.redraw();var e=this.criterion||app.store.createRecord("criteria");e.save(this.data()).then((function(t){"new"===n.id?m.route.set(app.route.criterion(t)):(n.loadCriterion(e),n.saving=!1,m.redraw())}))},n}(q.a),at=e(30),it=e.n(at),ot=e(31),st=e.n(ot),ct=e(24),mt=e.n(ct),ut=function(t){function n(){return t.apply(this,arguments)||this}return Object(i.a)(n,t),n.prototype.view=function(){var t=this,n=app.store.getById("groups",this.attrs.value),e=n?[st()(n.icon()),"\t",n.namePlural()]:app.translator.trans("nodeloc-auto-moderator.admin.group_selector.placeholder");return m("div",{className:"Form-group"},m("label",null,this.attrs.label),this.attrs.disabled?m("div",{className:"Button Button--danger"},e):m(it.a,{label:e,disabled:this.attrs.disabled,buttonClassName:"Button Button--danger"},app.store.all("groups").filter((function(t){return![mt.a.MEMBER_ID,mt.a.GUEST_ID].includes(t.id())})).map((function(e){return K.a.component({active:n&&n.id()===e.id(),disabled:n&&n.id()===e.id(),icon:e.icon(),onclick:function(){t.attrs.onchange(e.id())}},e.namePlural())}))))},n}(O.a),lt=function(t){function n(){return t.apply(this,arguments)||this}return Object(i.a)(n,t),n.prototype.view=function(){var t=this.attrs.settings;return m(ut,{value:t().group_id,onchange:function(n){return t({group_id:n})}})},n}(O.a),pt=e(11),dt=function(t){function n(){return t.apply(this,arguments)||this}return Object(i.a)(n,t),n.prototype.view=function(){var t=this.attrs.settings;return m("div",{className:"Form-group"},m("div",{className:"Form-group"},m(Z.a,{state:t().indefinitely,onchange:function(n){return t(j({},t(),{indefinitely:n}))}},app.translator.trans("nodeloc-auto-moderator.admin.suspend_selector.indefinitely"))),!t().indefinitely&&m("div",{className:"Form-group"},m("input",{className:"FormControl",type:"number",min:"0",value:t().days,onchange:function(n){return t(j({},t(),{days:n.target.value}))},placeholder:app.translator.trans("nodeloc-auto-moderator.admin.suspend_selector.days")})))},n}(e.n(pt).a);app.initializers.add("nodeloc/flarum-auto-moderator",(function(){app.routes.criterion={path:"/nodeloc-auto-moderator/criterion/:id",component:rt},app.autoModeratorForms={action:{add_to_group:lt,remove_from_group:lt,suspend:dt},requirement:{in_group:lt}},app.extensionData.for("nodeloc-auto-moderator").registerPage(L),app.route.criterion=function(t){return app.route("criterion",{id:(null==t?void 0:t.id())||"new"})},Object(r.a)(),Object(a.a)()}))}]);
//# sourceMappingURL=admin.js.map