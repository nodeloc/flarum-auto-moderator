(()=>{var t={n:n=>{var a=n&&n.__esModule?()=>n.default:()=>n;return t.d(a,{a}),a},d:(n,a)=>{for(var r in a)t.o(a,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:a[r]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n)};(()=>{"use strict";const n=flarum.core.compat["common/app"];t.n(n)().initializers.add("askvortsov/flarum-automod",(function(){console.log("[askvortsov/flarum-automod] Hello, forum and admin!")}));const a=flarum.core.compat["common/extend"],r=flarum.core.compat["common/components/EditUserModal"];var e=t.n(r);const i=flarum.core.compat["common/components/LoadingIndicator"];var o=t.n(i);const s=flarum.core.compat["common/utils/ItemList"];var c=t.n(s);function u(t){var n=t.filter((function(t){return t.actions()})).reduce((function(t,n){var a=n.actions().filter((function(t){return"add_to_group"===t.type||"remove_from_group"===t.type})).map((function(t){return t.settings.group_id}));return t.push.apply(t,a),t}),[]);return Array.from(new Set(n).values()).map((function(t){return app.store.getById("groups",t)})).filter((function(t){return t}))}function l(t,n){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},l(t,n)}function p(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n)}const d=flarum.core.compat["common/Component"];var v=t.n(d);const h=flarum.core.compat["common/components/GroupBadge"];var f=t.n(h),g=function(t){function n(){return t.apply(this,arguments)||this}return p(n,t),n.prototype.view=function(){var t=u(this.attrs.criteria),n=this.attrs.user;return m("div",{className:"ManagedGroups Form-group"},m("hr",null),m("h4",null,app.translator.trans("askvortsov-automod.lib.managed_groups.header")),m("ul",null,t.map((function(t){return m("label",{className:"checkbox"},n&&m("input",{type:"checkbox",checked:n.groups().includes(t),disabled:!0}),app.translator.trans("askvortsov-automod.lib.managed_groups.group_item",{badge:f().component({group:t,label:""}),groupName:t.nameSingular()}))}))),m("p",null,app.translator.trans("askvortsov-automod.lib.managed_groups.groups_not_editable")))},n}(v());const y=flarum.core.compat.Model;var b=t.n(y);const _=flarum.core.compat["models/User"];var N=t.n(_),k=function(t){function n(){return t.apply(this,arguments)||this}return p(n,t),n}(b());Object.assign(k.prototype,{name:b().attribute("name"),icon:b().attribute("icon"),description:b().attribute("description"),actions:b().attribute("actions"),metrics:b().attribute("metrics"),requirements:b().attribute("requirements"),isValid:b().attribute("isValid"),invalidActionSettings:b().attribute("invalidActionSettings"),invalidRequirementSettings:b().attribute("invalidRequirementSettings")});const x=flarum.core.compat["admin/components/ExtensionPage"];var w=t.n(x);const D=flarum.core.compat["common/components/Link"];var L=t.n(D);const O=flarum.core.compat["common/components/Tooltip"];var E=t.n(O);const q=flarum.core.compat["common/helpers/icon"];var B=t.n(q);const S=flarum.core.compat["common/utils/classList"];var G=t.n(S);const F=flarum.core.compat["common/utils/stringToColor"];var C=t.n(F);const I=flarum.core.compat.Component;var M=t.n(I),T=function(t){function n(){return t.apply(this,arguments)||this}return p(n,t),n.prototype.view=function(){return m("div",{className:"AutoModeratorInstructions"},m("h4",null,app.translator.trans("askvortsov-automod.admin.automoderator_instructions.header")),m("ul",null,app.translator.trans("askvortsov-automod.admin.automoderator_instructions.text")))},n}(M());function j(t){var n=t?t.name():app.translator.trans("askvortsov-automod.admin.automoderator_page.create_criterion_button"),a=t?t.icon()||"fas fa-bolt":"fas fa-plus",r=t?{"background-color":"#"+C()(t.name())}:"";return m(L(),{className:"ExtensionListItem",href:app.route.criterion(t)},m("span",{className:"ExtensionListItem-icon ExtensionIcon",style:r},B()(a)),m("span",{className:G()({"ExtensionListItem-title":!0,"ExtensionListItem--invalid":t&&!t.isValid()})},t&&!t.isValid()&&m(E(),{text:app.translator.trans("askvortsov-automod.admin.automoderator_page.criterion_invalid")},B()("fas fa-exclamation-triangle")),n))}var A=function(t){function n(){return t.apply(this,arguments)||this}p(n,t);var a=n.prototype;return a.oninit=function(n){var a=this;t.prototype.oninit.call(this,n),this.loading=!0,app.store.find("criteria").then((function(){a.loading=!1,m.redraw()}))},a.content=function(){return this.loading?m("div",{className:"Criteria"},m("div",{className:"container"},m(o(),null))):m("div",{className:"Criteria"},m("div",{className:"container"},m("div",{className:"ExtensionsWidget-list Criteria-list"},m("p",{className:"Criteria-list-heading"},app.translator.trans("askvortsov-automod.admin.automoderator_page.list_heading")),m("div",{className:"ExtensionList"},[].concat(app.store.all("criteria").map(j),[j()]))),m(g,{criteria:app.store.all("criteria")}),m("hr",null),m(T,null)))},n}(w());function R(){return R=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var r in a)({}).hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},R.apply(null,arguments)}const P=flarum.core.compat["admin/components/AdminPage"];var K=t.n(P);const W=flarum.core.compat["common/components/Button"];var V=t.n(W);const U=flarum.core.compat["common/components/LinkButton"];var z=t.n(U);const H=flarum.core.compat["common/components/Select"];var X=t.n(H);const J=flarum.core.compat["common/utils/Stream"];var Q=t.n(J),Y=function(t){function n(){return t.apply(this,arguments)||this}return p(n,t),n.prototype.view=function(){var t=this.attrs.item,n=this.attrs.selected;return m("li",null,m("div",{className:"DriverListItem-info"},m("span",{className:"DriverListItem-name DriverListItem-undefined"},app.translator.trans("askvortsov-automod.admin.undefined_driver_item.text",{driverName:t.type})),V().component({className:"Button Button--link",icon:"fas fa-trash-alt",onclick:function(){return n(n().filter((function(n){return n!==t})))}})),m("hr",null))},n}(M()),Z=function(t){function n(){return t.apply(this,arguments)||this}return p(n,t),n.prototype.view=function(){var t,n=this.attrs.driverType,a=this.attrs.type,r=this.attrs.settings,e=this.attrs.availableSettings,i=app.autoModeratorForms[n];return t=a in i?i[a].component({settings:r,availableSettings:e}):Object.keys(e).map((function(t){return m("div",{className:"Form-group"},m("input",{className:"FormControl",value:r()[t],onchange:function(n){var a=R({},r());a[t]=n.target.value,r(a)},placeholder:app.translator.trans(e[t])}))})),m("div",{className:"DriverListItem-form"},t)},n}(M()),$=function(t){function n(){return t.apply(this,arguments)||this}return p(n,t),n.prototype.view=function(){var t=this.attrs.action,n=this.attrs.actionDef,a=this.attrs.selected;return n?m("li",null,m("div",{className:G()({"DriverListItem-info":!0,"DriverListItem--missingExt":n.missingExt})},n.missingExt&&m(E(),{text:app.translator.trans("askvortsov-automod.admin.criterion_page.driver_missing_ext")},B()("fas fa-exclamation-triangle")),m("span",{className:"DriverListItem-name"},app.translator.trans(n.translationKey)),V().component({className:"Button Button--link",icon:"fas fa-trash-alt",onclick:function(){return a(a().filter((function(n){return n!==t})))}}),m(Z,{driverType:"action",type:t.type,settings:t.settings,availableSettings:n.availableSettings})),m("hr",null)):m(Y,{item:t,selected:a})},n}(M());const tt=flarum.core.compat["components/Button"];var nt=t.n(tt);const at=flarum.core.compat["utils/Stream"];var rt=t.n(at),et=function(t){function n(){return t.apply(this,arguments)||this}p(n,t);var a=n.prototype;return a.oninit=function(n){t.prototype.oninit.call(this,n),this.state=-1,-1!==this.attrs.min()&&(this.state+=1),-1!==this.attrs.max()&&(this.state+=2),this.min=rt()(this.attrs.min()),this.max=rt()(this.attrs.max())},a.view=function(){return m("div",{className:"Form-group MinMaxSelector"},m("label",null,this.attrs.label),m("div",{className:"MinMaxSelector--inputs"},this.controls()))},a.controls=function(){var t=this,a=function(){return m("input",{className:"FormControl",type:"number",min:"0",max:t.state===n.State.BETWEEN?-1!==t.attrs.max()?t.attrs.max():t.max():1/0,placeholder:"min",bidi:t.attrs.min})},r=function(){return m("input",{className:"FormControl",type:"number",min:t.state===Math.max(0,n.State.BETWEEN?-1!==t.attrs.min()?t.attrs.min():t.min():0),placeholder:"max",bidi:t.attrs.max})},e=function(){return m("input",{className:"FormControl MinMaxSelector--placeholder",disabled:!0,placeholder:"X"})},i=function(n){return m(nt(),{className:"Button",onclick:t.cycle.bind(t),icon:n})};switch(this.state){case n.State.LTE:return[e(),i("fas fa-less-than-equal"),r()];case n.State.GTE:return[e(),i("fas fa-greater-than-equal"),a()];case n.State.BETWEEN:return[a(),i("fas fa-less-than-equal"),e(),i("fas fa-less-than-equal"),r()]}},a.cycle=function(){switch(this.state++,this.state%=3,-1!==this.attrs.min()&&this.min(this.attrs.min()),-1!==this.attrs.max()&&this.max(this.attrs.max()),this.state){case n.State.GTE:this.attrs.min(this.min()),this.attrs.max(-1);break;case n.State.LTE:this.attrs.min(-1),this.attrs.max(this.max());break;case n.State.BETWEEN:this.attrs.min(this.min()),this.attrs.max(this.max())}},n}(M());et.State={GTE:0,LTE:1,BETWEEN:2};const it=et;var ot=function(t){function n(){return t.apply(this,arguments)||this}return p(n,t),n.prototype.view=function(){var t=this.attrs.metric,n=this.attrs.metricDef,a=this.attrs.selected;return n?m("li",null,m("div",{className:G()({"DriverListItem-info":!0,"DriverListItem--missingExt":n.missingExt})},n.missingExt&&m(E(),{text:app.translator.trans("askvortsov-automod.admin.criterion_page.driver_missing_ext")},B()("fas fa-exclamation-triangle")),m("span",{className:"DriverListItem-name"},app.translator.trans(n.translationKey)),V().component({className:"Button Button--link",icon:"fas fa-trash-alt",onclick:function(){return a(a().filter((function(n){return n!==t})))}})),m(it,{min:t.min,max:t.max}),m("hr",null)):m(Y,{item:t,selected:a})},n}(M());const st=flarum.core.compat["common/components/Switch"];var mt=t.n(st),ct=function(t){function n(){return t.apply(this,arguments)||this}return p(n,t),n.prototype.view=function(){var t=this.attrs.requirement,n=this.attrs.requirementDef,a=this.attrs.selected;return n?m("li",null,m("div",{className:G()({"DriverListItem-info":!0,"DriverListItem--missingExt":n.missingExt})},n.missingExt&&m(E(),{text:app.translator.trans("askvortsov-automod.admin.criterion_page.driver_missing_ext")},B()("fas fa-exclamation-triangle")),m("span",{className:"DriverListItem-name"},app.translator.trans(n.translationKey)),V().component({className:"Button Button--link",icon:"fas fa-trash-alt",onclick:function(){return a(a().filter((function(n){return n!==t})))}})),m(mt(),{state:t.negated(),onchange:t.negated},app.translator.trans("askvortsov-automod.admin.criterion_page.negated")),m(Z,{driverType:"requirement",type:t.type,settings:t.settings,availableSettings:n.availableSettings}),m("hr",null)):m(Y,{item:t,selected:a})},n}(M());const ut=flarum.core.compat["common/components/Alert"];var lt,pt,dt,vt=t.n(ut),ht=function(t){function n(){return t.apply(this,arguments)||this}return p(n,t),n.prototype.view=function(){var t=this.attrs.criterion;if(t){var n=[];t.isValid()?n.push(m(vt(),{type:"success",dismissible:!1},app.translator.trans("askvortsov-automod.admin.criterion_status.valid"))):n.push(m(vt(),{type:"error",dismissible:!1},app.translator.trans("askvortsov-automod.admin.criterion_status.invalid")));var a=t.invalidActionSettings();a&&Object.keys(a).length&&n.push(m(vt(),{type:"error",dismissible:!1},app.translator.trans("askvortsov-automod.admin.criterion_status.action_validation_errors"),m("div",null,m("ol",null,Object.keys(a).map((function(t){return m("li",null,m("strong",null,t,":")," ",a[t].join(""))}))))));var r=t.invalidRequirementSettings();return r&&Object.keys(r).length&&n.push(m(vt(),{type:"error",dismissible:!1},app.translator.trans("askvortsov-automod.admin.criterion_status.requirement_validation_errors"),m("div",null,m("ol",null,Object.keys(r).map((function(t){return m("li",null,m("strong",null,t,":")," ",r[t].join(""))})))))),0===t.metrics().length&&0===t.requirements().length&&n.push(m(vt(),{type:"danger",dismissible:!1},app.translator.trans("askvortsov-automod.admin.criterion_status.no_metrics_or_reqs"))),0===t.actions().length&&n.push(m(vt(),{type:"danger",dismissible:!1},app.translator.trans("askvortsov-automod.admin.criterion_status.no_actions"))),m("div",{className:"StatusCheck Form-group"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_status.heading")),n)}},n}(M()),ft=function(t){function n(){return t.apply(this,arguments)||this}p(n,t);var a=n.prototype;return a.oninit=function(n){var a=this;t.prototype.oninit.call(this,n),this.id=m.route.param("id"),this.name=Q()(""),this.icon=Q()("fas fa-bolt"),this.description=Q()(""),this.actionsOnGain=Q()([]),this.actionsOnLoss=Q()([]),this.metrics=Q()([]),this.requirements=Q()([]),this.newActionOnGain=Q()(""),this.newActionOnLoss=Q()(""),this.newMetric=Q()(""),this.newRequirement=Q()(""),this.loadingDrivers=!0,app.request({method:"GET",url:app.forum.attribute("apiUrl")+"/automod_drivers"}).then((function(t){lt=t.data.attributes.action,pt=t.data.attributes.metric,dt=t.data.attributes.requirement,a.loadingDrivers=!1,m.redraw()})),"new"!==this.id&&(this.loadingCriterion=!0,app.store.find("criteria",this.id).then((function(t){a.loadCriterion(t),a.loadingCriterion=!1,m.redraw()})))},a.loadCriterion=function(t){this.criterion=t,this.name(t.name()),this.icon(t.icon()||"fas fa-bolt"),this.description(t.description()),this.metrics(t.metrics().map((function(t){return{type:t.type,min:Q()(t.min),max:Q()(t.max)}}))),this.actionsOnGain(t.actions().filter((function(t){return t.gain})).map((function(t){return{type:t.type,settings:Q()(t.settings)}}))),this.actionsOnLoss(t.actions().filter((function(t){return!t.gain})).map((function(t){return{type:t.type,settings:Q()(t.settings)}}))),this.requirements(t.requirements().map((function(t){return{type:t.type,negated:Q()(t.negated),settings:Q()(t.settings)}})))},a.headerInfo=function(){var t,n="";return this.loadingCriterion?(n=app.translator.trans("askvortsov-automod.admin.criterion_page.loading"),t=app.translator.trans("askvortsov-automod.admin.criterion_page.loading")):t=this.criterion?this.criterion.name():app.translator.trans("askvortsov-automod.admin.criterion_page.new_criterion"),{className:"CriterionPage",icon:this.icon(),title:t,description:n}},a.content=function(){return this.loadingCriterion||this.loadingDrivers?m("div",{className:"Criteria"},m("div",{className:"container"},m(o(),null))):m("div",{className:"Criteria"},m("div",{className:"container"},m("form",{onsubmit:this.onsubmit.bind(this)},m("div",{className:"Form-group"},m(z(),{className:"Button",icon:"fas fa-chevron-left",href:app.route("extension",{id:"askvortsov-automod"})},app.translator.trans("askvortsov-automod.admin.criterion_page.back"))),m(ht,{criterion:this.criterion}),m("div",{className:"Form-group"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.name_label")),m("input",{className:"FormControl",bidi:this.name,required:!0})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.icon_label")),m("input",{className:"FormControl",bidi:this.icon,required:!0})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.description_label")),m("input",{className:"FormControl",bidi:this.description})),this.metricsAndRequirementsForm(),this.actionsForm(),m("div",{className:"Form-group"},m(V(),{type:"submit",className:"Button Button--primary",loading:this.saving,disabled:this.saving},app.translator.trans("core.admin.settings.submit_button"))),this.criterion&&m(V(),{type:"button",onclick:this.delete.bind(this),className:"Button Button--danger",loading:this.deleting,disabled:this.saving},app.translator.trans("askvortsov-automod.admin.criterion_page.delete_button"))),m("hr",null),m(T,null)))},a.metricsAndRequirementsForm=function(){var t=this;return m("div",{className:"Form-group"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.metrics_and_requirements_label")),m("div",{className:"helpText"},app.translator.trans("askvortsov-automod.admin.criterion_page.metrics_and_requirements_help")),m("div",{className:"SettingsGroups"},m("div",{className:"DriverGroup"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.metrics_heading")),m("ul",{className:"DriverList DriverList--primary"},this.metrics().map((function(n){return m(ot,{metric:n,metricDef:pt[n.type],selected:t.metrics})}))),m("span",{class:"DriverGroup-controls"},X().component({options:Object.keys(pt).reduce((function(t,n){return t[n]=app.translator.trans(pt[n].translationKey),t}),{}),value:this.newMetric(),onchange:this.newMetric}),V().component({className:"Button DriverList-button",icon:"fas fa-plus",disabled:!this.newMetric(),onclick:function(){t.metrics([].concat(t.metrics(),[{type:t.newMetric(),min:Q()(),max:Q()()}]))}}))),m("div",{className:"DriverGroup DriverGroup--secondary"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.requirements_heading")),m("ul",{className:"DriverList DriverList--primary"},this.requirements().map((function(n){return m(ct,{requirement:n,requirementDef:dt[n.type],selected:t.requirements})}))),m("span",{class:"DriverGroup-controls"},X().component({options:Object.keys(dt).reduce((function(t,n){return t[n]=app.translator.trans(dt[n].translationKey),t}),{}),value:this.newRequirement(),onchange:this.newRequirement}),V().component({className:"Button DriverList-button",icon:"fas fa-plus",disabled:!this.newRequirement(),onclick:function(){t.requirements([].concat(t.requirements(),[{type:t.newRequirement(),negated:Q()(!1),settings:Q()({})}]))}})))))},a.actionsForm=function(){var t=this;return m("div",{className:"Form-group"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.actions_label")),m("div",{className:"helpText"},app.translator.trans("askvortsov-automod.admin.criterion_page.actions_help")),m("div",{className:"SettingsGroups"},m("div",{className:"DriverGroup"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.actions_on_gain_heading")),m("ul",{className:"DriverList DriverList--primary"},this.actionsOnGain().map((function(n){return m($,{action:n,actionDef:lt[n.type],selected:t.actionsOnGain})}))),m("span",{class:"DriverGroup-controls"},X().component({options:Object.keys(lt).reduce((function(t,n){return t[n]=app.translator.trans(lt[n].translationKey),t}),{}),value:this.newActionOnGain(),onchange:this.newActionOnGain}),V().component({className:"Button DriverList-button",icon:"fas fa-plus",disabled:!this.newActionOnGain(),onclick:function(){t.actionsOnGain([].concat(t.actionsOnGain(),[{type:t.newActionOnGain(),settings:Q()({})}]))}}))),m("div",{className:"DriverGroup DriverGroup--secondary"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.actions_on_loss_heading")),m("ul",{className:"DriverList"},this.actionsOnLoss().map((function(n){return m($,{action:n,actionDef:lt[n.type],selected:t.actionsOnLoss})}))),m("span",{class:"DriverGroup-controls"},X().component({options:Object.keys(lt).reduce((function(t,n){return t[n]=app.translator.trans(lt[n].translationKey),t}),{}),value:this.newActionOnLoss(),onchange:this.newActionOnLoss}),V().component({className:"Button DriverList-button",icon:"fas fa-plus",disabled:!this.newActionOnLoss(),onclick:function(){t.actionsOnLoss([].concat(t.actionsOnLoss(),[{type:t.newActionOnLoss(),settings:Q()({})}]))}})))))},a.data=function(){return{name:this.name(),icon:this.icon(),description:this.description(),actions:[].concat(this.actionsOnGain().map((function(t){return R({},t,{gain:!0,settings:t.settings()})})),this.actionsOnLoss().map((function(t){return R({},t,{gain:!1,settings:t.settings()})}))),metrics:this.metrics().map((function(t){return{type:t.type,min:t.min(),max:t.max()}})),requirements:this.requirements().map((function(t){return{type:t.type,negated:t.negated(),settings:t.settings()}}))}},a.delete=function(t){t.preventDefault(),this.deleting=!0,m.redraw(),this.criterion.delete().then((function(){m.route.set(app.route("extension",{id:"askvortsov-automod"}))}))},a.onsubmit=function(t){var n=this;t.preventDefault(),this.saving=!0,m.redraw();var a=this.criterion||app.store.createRecord("criteria");a.save(this.data()).then((function(t){"new"===n.id?m.route.set(app.route.criterion(t)):(n.loadCriterion(a),n.saving=!1,m.redraw())}))},n}(K());const gt=flarum.core.compat["components/Dropdown"];var yt=t.n(gt);const bt=flarum.core.compat["helpers/icon"];var _t=t.n(bt);const Nt=flarum.core.compat["models/Group"];var kt=t.n(Nt),xt=function(t){function n(){return t.apply(this,arguments)||this}return p(n,t),n.prototype.view=function(){var t=this,n=app.store.getById("groups",this.attrs.value),a=n?[_t()(n.icon()),"\t",n.namePlural()]:app.translator.trans("askvortsov-automod.admin.group_selector.placeholder");return m("div",{className:"Form-group"},m("label",null,this.attrs.label),this.attrs.disabled?m("div",{className:"Button Button--danger"},a):m(yt(),{label:a,disabled:this.attrs.disabled,buttonClassName:"Button Button--danger"},app.store.all("groups").filter((function(t){return![kt().MEMBER_ID,kt().GUEST_ID].includes(t.id())})).map((function(a){return nt().component({active:n&&n.id()===a.id(),disabled:n&&n.id()===a.id(),icon:a.icon(),onclick:function(){t.attrs.onchange(a.id())}},a.namePlural())}))))},n}(M()),wt=function(t){function n(){return t.apply(this,arguments)||this}return p(n,t),n.prototype.view=function(){var t=this.attrs.settings;return m(xt,{value:t().group_id,onchange:function(n){return t({group_id:n})}})},n}(M()),Dt=function(t){function n(){return t.apply(this,arguments)||this}return p(n,t),n.prototype.view=function(){var t=this.attrs.settings;return m("div",{className:"Form-group"},m("div",{className:"Form-group"},m(mt(),{state:t().indefinitely,onchange:function(n){return t(R({},t(),{indefinitely:n}))}},app.translator.trans("askvortsov-automod.admin.suspend_selector.indefinitely"))),!t().indefinitely&&m("div",{className:"Form-group"},m("input",{className:"FormControl",type:"number",min:"0",value:t().days,onchange:function(n){return t(R({},t(),{days:n.target.value}))},placeholder:app.translator.trans("askvortsov-automod.admin.suspend_selector.days")})))},n}(v());app.initializers.add("askvortsov/flarum-automod",(function(){app.routes.criterion={path:"/askvortsov-automod/criterion/:id",component:ft},app.autoModeratorForms={action:{add_to_group:wt,remove_from_group:wt,suspend:Dt},requirement:{in_group:wt}},app.extensionData.for("askvortsov-automod").registerPage(A),app.route.criterion=function(t){return app.route("criterion",{id:(null==t?void 0:t.id())||"new"})},(0,a.extend)(e().prototype,"oninit",(function(){var t=this;this.loading=!0,app.store.find("criteria").then((function(n){u(n).forEach((function(n){return delete t.groups[n.id()]})),t.loading=!1,m.redraw()}))})),(0,a.override)(e().prototype,"fields",(function(t){if(this.loading){var n=new(c());return n.add("loading",m(o(),null)),n}var a=t();return a.add("Criteria",m(g,{criteria:app.store.all("criteria"),user:this.attrs.user}),10),a})),app.store.models.criteria=k,N().prototype.criteria=b().hasMany("criteria")}))})(),module.exports={}})();
//# sourceMappingURL=admin.js.map